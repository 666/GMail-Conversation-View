<!DOCTYPE html>

<html>

<head>
  <title>Conversation Reader</title>
  <link rel="stylesheet" type="text/css" href="chrome://conversations/skin/conversation.css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
  <script type="text/javascript" src="js/jquery.text-overflow.js"></script>
  <script type="application/javascript;version=1.8">
    function scrollNodeIntoView (aNode) {
      let offset = aNode.offsetTop || 0;
      let parent = aNode.parentNode;
      while (parent && !(parent instanceof HTMLDocument)) {
        let style = window.getComputedStyle(parent, null);
        if (style.position == "relative")
          offset += parent.offsetTop;
        parent = parent.parentNode;
      }
      // The header is 44px high (yes, this is harcodeadly ugly).
      window.scrollTo(0, offset + 5 - 44);
    }

    function toggleQuote(event, showquotedtext, hidequotedtext) {
      let link = event.target;
      let div = link.nextSibling;
      let cs = window.getComputedStyle(div, null);
      if (div.style.display == "none") {
        link.textContent = "- "+hidequotedtext+" -";
        div.style.display = "";
        let h = div.getBoundingClientRect().height +
          parseFloat(cs.marginTop) + parseFloat(cs.marginBottom);
        return h;
      } else {
        let h = div.getBoundingClientRect().height;
        h += parseFloat(cs.marginTop);
        h += parseFloat(cs.marginBottom);
        link.textContent = "- "+showquotedtext+" -";
        div.style.display = "none";
        return -h;
      }
    }

    // Setting the second parameter to false means don't fire a stupid timer
    //  that lives forever everytime we call this function.
    function killOverflowSubject() {
      $(".subject").textOverflow(null, false);
    }

    function killOverflowInvolved(aMsgNode) {
      $(aMsgNode).find(".involved").textOverflow(null, false);
    }
  </script>
</head>

<body>
  <div id="wrapper">
    <div id="conversationHeaderWrapper">
      <div id="conversationHeader" class="hbox">
        <div class="subject boxFlex">This is an example of a subject</div>
        <div class="actions">
          <button><img src="i/trash.png"></button>
          <button><img src="i/archive.png"></button>
          <button><span class="expand"></span></button>
          <button><span class="read"></span></button>
          <button><img src="i/tab.png"></button>
          <button><span class="mode"></span></button>
        </div>
      </div>
    </div>
    <ul id="messageList">
    </ul>
  </div>
</body>
</html>
